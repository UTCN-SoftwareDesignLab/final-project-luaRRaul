{"remainingRequest":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/src/components/WebsocketGreetings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/src/components/WebsocketGreetings.vue","mtime":1620237372918},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTb2NrSlMgZnJvbSAic29ja2pzLWNsaWVudCI7CmltcG9ydCBTdG9tcCBmcm9tICJ3ZWJzdG9tcC1jbGllbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIndlYnNvY2tldGRlbW8iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWNlaXZlZF9tZXNzYWdlczogW10sCiAgICAgIHNlbmRfbWVzc2FnZTogbnVsbCwKICAgICAgY29ubmVjdGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlbmQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZW5kIG1lc3NhZ2U6IiArIHRoaXMuc2VuZF9tZXNzYWdlKTsKICAgICAgaWYgKHRoaXMuc3RvbXBDbGllbnQgJiYgdGhpcy5zdG9tcENsaWVudC5jb25uZWN0ZWQpIHsKICAgICAgICB0aGlzLnNlbmRfbWVzc2FnZSA9IHsgcGF0aWVudElkIDogdGhpcy5zZW5kX21lc3NhZ2UgfTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLnNlbmRfbWVzc2FnZSkpOwogICAgICAgIHRoaXMuc3RvbXBDbGllbnQuc2VuZCgiL2FwaS93cy9hcnJpdmFsIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5zZW5kX21lc3NhZ2UpLHt9KTsKICAgICAgfQogICAgfSwKICAgIGNvbm5lY3QoKSB7CiAgICAgIHRoaXMuc29ja2V0ID0gbmV3IFNvY2tKUygiaHR0cDovL2xvY2FsaG9zdDo4MDg4L2FwaS9teS13ZWJzb2NrZXQiKTsKICAgICAgdGhpcy5zdG9tcENsaWVudCA9IFN0b21wLm92ZXIodGhpcy5zb2NrZXQpOwogICAgICB0aGlzLnN0b21wQ2xpZW50LmNvbm5lY3QoCiAgICAgICAgICB7fSwKICAgICAgICAgIGZyYW1lID0+IHsKICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICBjb25zb2xlLmxvZyhmcmFtZSk7CiAgICAgICAgICAgIHRoaXMuc3RvbXBDbGllbnQuc3Vic2NyaWJlKCIvYXBpL3RvcGljL2Fycml2YWxzIiwgdGljayA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2codGljayk7CiAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlZF9tZXNzYWdlcy5wdXNoKEpTT04ucGFyc2UodGljay5ib2R5KS5jb25uZWN0KCkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sCiAgICAgICAgICBlcnJvciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBkaXNjb25uZWN0KCkgewogICAgICBpZiAodGhpcy5zdG9tcENsaWVudCkgewogICAgICAgIHRoaXMuc3RvbXBDbGllbnQuZGlzY29ubmVjdCgpOwogICAgICB9CiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAgICB9LAogICAgdGlja2xlQ29ubmVjdGlvbigpIHsKICAgICAgdGhpcy5jb25uZWN0ZWQgPyB0aGlzLmRpc2Nvbm5lY3QoKSA6IHRoaXMuY29ubmVjdCgpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY29ubmVjdCgpOwogIH0KfTsK"},{"version":3,"sources":["WebsocketGreetings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WebsocketGreetings.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div id=\"main-content\" class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <form class=\"form-inline\">\n            <div class=\"form-group\">\n              <label for=\"connect\">WebSocket connection:</label>\n              <v-btn id=\"connect\" class=\"btn btn-default\" type=\"submit\" :disabled=\"connected === true\" @click.prevent=\"connect\">Connect</v-btn>\n              <v-btn id=\"disconnect\" class=\"btn btn-default\" type=\"submit\" :disabled=\"connected === false\" @click.prevent=\"disconnect\">Disconnect\n              </v-btn>\n            </div>\n          </form>\n        </div>\n        <div class=\"col-md-6\">\n          <form class=\"form-inline\">\n            <div class=\"form-group\">\n              <v-text-field v-model=\"send_message\" label=\"Patient Id\" />\n            </div>\n            <v-btn id=\"send\" class=\"btn btn-default\" type=\"submit\" @click.prevent=\"send\">Send</v-btn>\n          </form>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <table id=\"conversation\" class=\"table table-striped\">\n            <thead>\n            <tr>\n              <th>Greetings</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr v-for=\"item in received_messages\" :key=\"item\">\n              <td>{{ item }}</td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\";\nexport default {\n  name: \"websocketdemo\",\n  data() {\n    return {\n      received_messages: [],\n      send_message: null,\n      connected: false\n    };\n  },\n  methods: {\n    send() {\n      console.log(\"Send message:\" + this.send_message);\n      if (this.stompClient && this.stompClient.connected) {\n        this.send_message = { patientId : this.send_message };\n        console.log(JSON.stringify(this.send_message));\n        this.stompClient.send(\"/api/ws/arrival\", JSON.stringify(this.send_message),{});\n      }\n    },\n    connect() {\n      this.socket = new SockJS(\"http://localhost:8088/api/my-websocket\");\n      this.stompClient = Stomp.over(this.socket);\n      this.stompClient.connect(\n          {},\n          frame => {\n            this.connected = true;\n            console.log(frame);\n            this.stompClient.subscribe(\"/api/topic/arrivals\", tick => {\n              console.log(tick);\n              this.received_messages.push(JSON.parse(tick.body).connect());\n            });\n          },\n          error => {\n            console.log(error);\n            this.connected = false;\n          }\n      );\n    },\n    disconnect() {\n      if (this.stompClient) {\n        this.stompClient.disconnect();\n      }\n      this.connected = false;\n    },\n    tickleConnection() {\n      this.connected ? this.disconnect() : this.connect();\n    }\n  },\n  mounted() {\n    this.connect();\n  }\n};\n</script>\n<style scoped=\"\">\n</style>\n"]}]}