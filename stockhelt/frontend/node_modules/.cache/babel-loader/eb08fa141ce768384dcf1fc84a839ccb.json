{"remainingRequest":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/babel-loader/lib/index.js!/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/src/components/WebsocketGreetings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/src/components/WebsocketGreetings.vue","mtime":1620237372918},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tmst/an3sem2/sd/assignment-3-luaRRaul/Assignments/Assignment 3/stockhelt/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFNvY2tKUyBmcm9tICJzb2NranMtY2xpZW50IjsKaW1wb3J0IFN0b21wIGZyb20gIndlYnN0b21wLWNsaWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAid2Vic29ja2V0ZGVtbyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlY2VpdmVkX21lc3NhZ2VzOiBbXSwKICAgICAgc2VuZF9tZXNzYWdlOiBudWxsLAogICAgICBjb25uZWN0ZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VuZDogZnVuY3Rpb24gc2VuZCgpIHsKICAgICAgY29uc29sZS5sb2coIlNlbmQgbWVzc2FnZToiICsgdGhpcy5zZW5kX21lc3NhZ2UpOwoKICAgICAgaWYgKHRoaXMuc3RvbXBDbGllbnQgJiYgdGhpcy5zdG9tcENsaWVudC5jb25uZWN0ZWQpIHsKICAgICAgICB0aGlzLnNlbmRfbWVzc2FnZSA9IHsKICAgICAgICAgIHBhdGllbnRJZDogdGhpcy5zZW5kX21lc3NhZ2UKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuc2VuZF9tZXNzYWdlKSk7CiAgICAgICAgdGhpcy5zdG9tcENsaWVudC5zZW5kKCIvYXBpL3dzL2Fycml2YWwiLCBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbmRfbWVzc2FnZSksIHt9KTsKICAgICAgfQogICAgfSwKICAgIGNvbm5lY3Q6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNvY2tldCA9IG5ldyBTb2NrSlMoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9hcGkvbXktd2Vic29ja2V0Iik7CiAgICAgIHRoaXMuc3RvbXBDbGllbnQgPSBTdG9tcC5vdmVyKHRoaXMuc29ja2V0KTsKICAgICAgdGhpcy5zdG9tcENsaWVudC5jb25uZWN0KHt9LCBmdW5jdGlvbiAoZnJhbWUpIHsKICAgICAgICBfdGhpcy5jb25uZWN0ZWQgPSB0cnVlOwogICAgICAgIGNvbnNvbGUubG9nKGZyYW1lKTsKCiAgICAgICAgX3RoaXMuc3RvbXBDbGllbnQuc3Vic2NyaWJlKCIvYXBpL3RvcGljL2Fycml2YWxzIiwgZnVuY3Rpb24gKHRpY2spIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHRpY2spOwoKICAgICAgICAgIF90aGlzLnJlY2VpdmVkX21lc3NhZ2VzLnB1c2goSlNPTi5wYXJzZSh0aWNrLmJvZHkpLmNvbm5lY3QoKSk7CiAgICAgICAgfSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBfdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZGlzY29ubmVjdDogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKICAgICAgaWYgKHRoaXMuc3RvbXBDbGllbnQpIHsKICAgICAgICB0aGlzLnN0b21wQ2xpZW50LmRpc2Nvbm5lY3QoKTsKICAgICAgfQoKICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICB0aWNrbGVDb25uZWN0aW9uOiBmdW5jdGlvbiB0aWNrbGVDb25uZWN0aW9uKCkgewogICAgICB0aGlzLmNvbm5lY3RlZCA/IHRoaXMuZGlzY29ubmVjdCgpIDogdGhpcy5jb25uZWN0KCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jb25uZWN0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["WebsocketGreetings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,OAAA,MAAA,MAAA,eAAA;AACA,OAAA,KAAA,MAAA,iBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,iBAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,KAAA,YAAA;;AACA,UAAA,KAAA,WAAA,IAAA,KAAA,WAAA,CAAA,SAAA,EAAA;AACA,aAAA,YAAA,GAAA;AAAA,UAAA,SAAA,EAAA,KAAA;AAAA,SAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,YAAA,CAAA;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,iBAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,YAAA,CAAA,EAAA,EAAA;AACA;AACA,KARA;AASA,IAAA,OATA,qBASA;AAAA;;AACA,WAAA,MAAA,GAAA,IAAA,MAAA,CAAA,wCAAA,CAAA;AACA,WAAA,WAAA,GAAA,KAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA;AACA,WAAA,WAAA,CAAA,OAAA,CACA,EADA,EAEA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,SAAA,CAAA,qBAAA,EAAA,UAAA,IAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AACA,UAAA,KAAA,CAAA,iBAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,EAAA,OAAA,EAAA;AACA,SAHA;AAIA,OATA,EAUA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AACA,OAbA;AAeA,KA3BA;AA4BA,IAAA,UA5BA,wBA4BA;AACA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,WAAA,CAAA,UAAA;AACA;;AACA,WAAA,SAAA,GAAA,KAAA;AACA,KAjCA;AAkCA,IAAA,gBAlCA,8BAkCA;AACA,WAAA,SAAA,GAAA,KAAA,UAAA,EAAA,GAAA,KAAA,OAAA,EAAA;AACA;AApCA,GATA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,OAAA;AACA;AAjDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div id=\"main-content\" class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <form class=\"form-inline\">\n            <div class=\"form-group\">\n              <label for=\"connect\">WebSocket connection:</label>\n              <v-btn id=\"connect\" class=\"btn btn-default\" type=\"submit\" :disabled=\"connected === true\" @click.prevent=\"connect\">Connect</v-btn>\n              <v-btn id=\"disconnect\" class=\"btn btn-default\" type=\"submit\" :disabled=\"connected === false\" @click.prevent=\"disconnect\">Disconnect\n              </v-btn>\n            </div>\n          </form>\n        </div>\n        <div class=\"col-md-6\">\n          <form class=\"form-inline\">\n            <div class=\"form-group\">\n              <v-text-field v-model=\"send_message\" label=\"Patient Id\" />\n            </div>\n            <v-btn id=\"send\" class=\"btn btn-default\" type=\"submit\" @click.prevent=\"send\">Send</v-btn>\n          </form>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <table id=\"conversation\" class=\"table table-striped\">\n            <thead>\n            <tr>\n              <th>Greetings</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr v-for=\"item in received_messages\" :key=\"item\">\n              <td>{{ item }}</td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\";\nexport default {\n  name: \"websocketdemo\",\n  data() {\n    return {\n      received_messages: [],\n      send_message: null,\n      connected: false\n    };\n  },\n  methods: {\n    send() {\n      console.log(\"Send message:\" + this.send_message);\n      if (this.stompClient && this.stompClient.connected) {\n        this.send_message = { patientId : this.send_message };\n        console.log(JSON.stringify(this.send_message));\n        this.stompClient.send(\"/api/ws/arrival\", JSON.stringify(this.send_message),{});\n      }\n    },\n    connect() {\n      this.socket = new SockJS(\"http://localhost:8088/api/my-websocket\");\n      this.stompClient = Stomp.over(this.socket);\n      this.stompClient.connect(\n          {},\n          frame => {\n            this.connected = true;\n            console.log(frame);\n            this.stompClient.subscribe(\"/api/topic/arrivals\", tick => {\n              console.log(tick);\n              this.received_messages.push(JSON.parse(tick.body).connect());\n            });\n          },\n          error => {\n            console.log(error);\n            this.connected = false;\n          }\n      );\n    },\n    disconnect() {\n      if (this.stompClient) {\n        this.stompClient.disconnect();\n      }\n      this.connected = false;\n    },\n    tickleConnection() {\n      this.connected ? this.disconnect() : this.connect();\n    }\n  },\n  mounted() {\n    this.connect();\n  }\n};\n</script>\n<style scoped=\"\">\n</style>\n"],"sourceRoot":"src/components"}]}